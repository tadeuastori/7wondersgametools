import{b as pt}from"./chunk-O5QNLC3S.js";import{a as ee,b as ne}from"./chunk-PPMVQBJH.js";import{a as Rt,b as Ft,c as Vt,d as Wt,e as Nt,f as zt,g as $t,h as Ut,i as Ht,j as jt,k as Qt,l as Yt,m as qt,n as Zt,o as Xt}from"./chunk-EPCD3WCK.js";import{b as Tt}from"./chunk-MVCCDNO7.js";import{a as Ot,b as Jt,c as Kt,d as te,e as w,f as ae,n as oe}from"./chunk-IS34MZJW.js";import{B as Lt,C as Dt,E as At,G as Bt,J as P,a as u,aa as Gt,t as Et,v as It}from"./chunk-EENQSQLG.js";import{$c as ft,Ab as b,Ba as K,Bb as c,Cb as rt,Da as tt,Db as lt,Fb as st,Ga as et,Gb as ct,Hb as dt,Ic as ht,Jc as bt,Kb as gt,La as l,Lb as g,Mb as S,Nb as E,Pa as nt,Sc as _t,Vb as ut,X as A,Xa as O,Ya as at,Za as G,_a as ot,_c as N,ab as p,ac as mt,ad as yt,ba as Z,cc as k,da as B,ga as d,hb as R,ib as m,k as Q,kb as it,kd as vt,ld as Ct,m as Y,md as Mt,na as _,nb as C,nd as xt,oa as f,ob as F,pd as St,qb as V,qd as kt,rb as W,sb as i,tb as s,u as q,ua as X,ub as y,ud as Pt,vb as M,vd as wt,wb as x,xa as J,yb as v}from"./chunk-QLFZEIEK.js";var de=["button"],ge=["*"];function ue(e,o){if(e&1&&(i(0,"div",2),y(1,"mat-pseudo-checkbox",6),s()),e&2){let t=c();l(),m("disabled",t.disabled)}}var me=new B("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:pe});function pe(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var he=new B("MatButtonToggleGroup");var z=class{source;value;constructor(o,t){this.source=o,this.value=t}};var $=(()=>{class e{_changeDetectorRef=d(mt);_elementRef=d(K);_focusMonitor=d(ht);_idGenerator=d(_t);_animationMode=d(et,{optional:!0});_checked=!1;ariaLabel;ariaLabelledby=null;_buttonElement;buttonToggleGroup;get buttonId(){return`${this.id}-button`}id;name;value;get tabIndex(){return this._tabIndex}set tabIndex(t){t!==this._tabIndex&&(this._tabIndex=t,this._markForCheck())}_tabIndex;disableRipple;get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}_appearance;get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=t}_disabled=!1;get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(t){this._disabledInteractive=t}_disabledInteractive;change=new J;constructor(){d(bt).load(Ct);let t=d(he,{optional:!0}),n=d(new X("tabindex"),{optional:!0})||"",a=d(me,{optional:!0});this._tabIndex=parseInt(n)||0,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard",this.disabledInteractive=a?.disabledInteractive??!1}ngOnInit(){let t=this.buttonToggleGroup;this.id=this.id||this._idGenerator.getId("mat-button-toggle-"),t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._animationMode!=="NoopAnimations"&&this._elementRef.nativeElement.classList.add("mat-button-toggle-animations-enabled"),this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){if(this.disabled)return;let t=this.isSingleSelector()?!0:!this._checked;if(t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let n=this.buttonToggleGroup._buttonToggles.find(a=>a.tabIndex===0);n&&(n.tabIndex=-1),this.tabIndex=0}this.change.emit(new z(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=O({type:e,selectors:[["mat-button-toggle"]],viewQuery:function(n,a){if(n&1&&st(de,5),n&2){let r;ct(r=dt())&&(a._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(n,a){n&1&&b("focus",function(){return a.focus()}),n&2&&(R("aria-label",null)("aria-labelledby",null)("id",a.id)("name",null),it("mat-button-toggle-standalone",!a.buttonToggleGroup)("mat-button-toggle-checked",a.checked)("mat-button-toggle-disabled",a.disabled)("mat-button-toggle-disabled-interactive",a.disabledInteractive)("mat-button-toggle-appearance-standard",a.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",k],appearance:"appearance",checked:[2,"checked","checked",k],disabled:[2,"disabled","disabled",k],disabledInteractive:[2,"disabledInteractive","disabledInteractive",k]},outputs:{change:"change"},exportAs:["matButtonToggle"],ngContentSelectors:ge,decls:7,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-checkbox-wrapper"],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"],["state","checked","aria-hidden","true","appearance","minimal",3,"disabled"]],template:function(n,a){if(n&1){let r=v();rt(),i(0,"button",1,0),b("click",function(){return _(r),f(a._onButtonClick())}),p(2,ue,2,1,"div",2),i(3,"span",3),lt(4),s()(),y(5,"span",4)(6,"span",5)}if(n&2){let r=gt(1);m("id",a.buttonId)("disabled",a.disabled&&!a.disabledInteractive||null),R("role",a.isSingleSelector()?"radio":"button")("tabindex",a.disabled&&!a.disabledInteractive?-1:a.tabIndex)("aria-pressed",a.isSingleSelector()?null:a.checked)("aria-checked",a.isSingleSelector()?a.checked:null)("name",a._getButtonName())("aria-label",a.ariaLabel)("aria-labelledby",a.ariaLabelledby)("aria-disabled",a.disabled&&a.disabledInteractive?"true":null),l(2),C(a.buttonToggleGroup&&(!a.buttonToggleGroup.multiple&&!a.buttonToggleGroup.hideSingleSelectionIndicator||a.buttonToggleGroup.multiple&&!a.buttonToggleGroup.hideMultipleSelectionIndicator)?2:-1),l(4),m("matRippleTrigger",r)("matRippleDisabled",a.disableRipple||a.disabled)}},dependencies:[vt,Lt],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}@media(forced-colors: active){.mat-button-toggle-standalone,.mat-button-toggle-group{outline:solid 1px}}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}@media(forced-colors: active){.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checkbox-wrapper{display:inline-block;justify-content:flex-start;align-items:center;width:0;height:18px;line-height:18px;overflow:hidden;box-sizing:border-box;position:absolute;top:50%;left:16px;transform:translate3d(0, -50%, 0)}[dir=rtl] .mat-button-toggle-checkbox-wrapper{left:auto;right:16px}.mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:12px}[dir=rtl] .mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:auto;right:12px}.mat-button-toggle-checked .mat-button-toggle-checkbox-wrapper{width:18px}.mat-button-toggle-animations-enabled .mat-button-toggle-checkbox-wrapper{transition:width 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-checkbox-wrapper{transition:none}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-sys-on-surface));background-color:var(--mat-standard-button-toggle-background-color, transparent);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-sys-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-sys-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-state-background-color, transparent)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-sys-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height, 40px)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}@media(forced-colors: active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-animations-enabled .mat-button-toggle-button{transition:padding 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-button{transition:none}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:30px}[dir=rtl] .mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:0;padding-right:30px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}"],encapsulation:2,changeDetection:0})}return e})(),re=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=at({type:e});static \u0275inj=Z({imports:[N,xt,$,N]})}return e})();var le=(()=>{class e{_store=d(Dt);destroy$=new Q;_snackbarService=d(Gt);applicationStateIsReady=this._store.selectSignal(P.isStateReady);constructor(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(n){return new(n||e)};static \u0275dir=G({type:e})}return e})();var I=class extends It{_dataStream=new Y;count=this._dataStream.pipe(q(o=>o.length));constructor(o=[]){super(),this.setData(o)}connect(){return this._dataStream}disconnect(){}setData(o){this._dataStream.next(o)}};var T=function(e){return e.InitializeMatchState="[MatchState] InitializeMatchState",e.CreateAndStartMatch="[MatchState] CreateAndStartMatch",e.SaveStage="[MatchState] SaveStage",e}(T||{});var L;(function(e){class o{static type=T.InitializeMatchState}e.InitializeMatchState=o;class t{game;expansions;players;static type=T.CreateAndStartMatch;constructor(r,h,D){this.game=r,this.expansions=h,this.players=D}}e.CreateAndStartMatch=t;class n{static type=T.SaveStage}e.EndMatch=n})(L||(L={}));function se(e,o,t){var n=e===u.GAME_DUEL&&t&&o===2||e===u.GAME_ARCHITECTS&&t&&o>=2&&o<=7||e===u.GAME_BASE&&t&&o>=3&&o<=7;return n}function ce(e,o=0){var t=(e===u.GAME_BASE||e===u.GAME_ARCHITECTS)&&o==1||e===u.GAME_DUEL&&o==4;return t}var _e=()=>["disclaimer"];function fe(e,o){if(e&1&&(i(0,"mat-icon"),g(1),s()),e&2){let t=c().$implicit;l(),S(t.icon)}}function ye(e,o){if(e&1){let t=v();i(0,"mat-button-toggle",23),b("change",function(){let a=_(t).$index,r=c(2);return f(r.onChangeExpansionValue(a))}),p(1,fe,2,1,"mat-icon"),g(2),s()}if(e&2){let t=o.$implicit,n=c().$implicit;m("value",t.value),l(),C(t.icon?1:-1),l(),E(" ",n(t.label)," ")}}function ve(e,o){if(e&1&&(i(0,"th",24),g(1),s()),e&2){let t=c().$implicit;l(),S(t("table_forms.player"))}}function Ce(e,o){if(e&1&&(i(0,"td",25)(1,"p"),g(2),s()()),e&2){let t=o.$implicit;l(2),S(t.name)}}function Me(e,o){if(e&1&&(i(0,"th",26),g(1),s()),e&2){let t=c().$implicit;l(),S(t("table_forms.wonder"))}}function xe(e,o){if(e&1&&(i(0,"mat-icon"),g(1),s()),e&2){let t=c().$implicit;l(),S(t.side)}}function Se(e,o){if(e&1&&(i(0,"p"),g(1),p(2,xe,2,1,"mat-icon"),s()),e&2){let t=o.$implicit;l(),E(" ",t.name," "),l(),C(t.side?2:-1)}}function ke(e,o){if(e&1&&(i(0,"td",25),V(1,Se,3,2,"p",null,F),s()),e&2){let t=o.$implicit;l(),W(t.wonder)}}function Pe(e,o){e&1&&y(0,"th",26)}function we(e,o){if(e&1){let t=v();i(0,"td",25)(1,"button",27),b("click",function(){let a=_(t).index,r=c(2);return f(r.removePlayer(a))}),i(2,"mat-icon"),g(3,"delete"),s()()()}}function Te(e,o){if(e&1){let t=v();i(0,"div",29)(1,"button",30),b("click",function(){_(t);let a=c(3);return f(a.orderByPlayerName())}),i(2,"mat-icon"),g(3,"sort_by_alpha"),s(),i(4,"mat-icon"),g(5,"person"),s()(),i(6,"button",30),b("click",function(){_(t);let a=c(3);return f(a.generateWonders())}),i(7,"mat-icon"),g(8,"shuffle"),s(),i(9,"mat-icon"),g(10,"temple_hindu"),s()()()}}function Oe(e,o){if(e&1&&(i(0,"td",28),p(1,Te,11,0,"div",29),s()),e&2){let t=c(2);l(),C(t.matchPlayersList.length>0?1:-1)}}function Ee(e,o){e&1&&y(0,"tr",31)}function Ie(e,o){e&1&&y(0,"tr",32)}function Le(e,o){e&1&&y(0,"tr",33)}function De(e,o){if(e&1){let t=v();M(0),i(1,"div",1)(2,"div",2),y(3,"app-title-bar",3),s(),i(4,"div",4),V(5,ye,3,3,"mat-button-toggle",5,F),s(),i(7,"div",6)(8,"app-title-bar",7),b("returnAddPlayerDialogEmitted",function(a){_(t);let r=c();return f(r.addPlayer(a))}),s()(),i(9,"div",8)(10,"table",9),M(11,10),p(12,ve,2,1,"th",11)(13,Ce,3,1,"td",12),x(),M(14,13),p(15,Me,2,1,"th",14)(16,ke,3,0,"td",12),x(),M(17,15),p(18,Pe,1,0,"th",14)(19,we,4,0,"td",12),x(),M(20,16),p(21,Oe,2,1,"td",17),x(),p(22,Ee,1,0,"tr",18)(23,Ie,1,0,"tr",19)(24,Le,1,0,"tr",20),s()(),i(25,"div",21)(26,"button",22),b("click",function(){_(t);let a=c();return f(a.createAndStartMatch())}),i(27,"mat-icon"),g(28,"casino"),s(),g(29),s()()(),x()}if(e&2){let t=o.$implicit,n=c();l(3),m("title",t("pages.score_sheet.configuration.expansions"))("action",n.eTitleBarAction.NONE),l(2),W(n.originalExpansionList),l(3),m("title",t("pages.score_sheet.configuration.players"))("action",n.gameType===n.eGameType.GAME_DUEL&&n.matchPlayersList.length<2||n.gameType!=n.eGameType.GAME_DUEL&&n.matchPlayersList.length<7?n.eTitleBarAction.ADD_PLAYER:n.eTitleBarAction.NONE)("matDialogConfig",n.dialogData()),l(2),m("dataSource",n.matchPlayerDataSource),l(12),m("matHeaderRowDef",n.displayedColumns),l(),m("matRowDefColumns",n.displayedColumns),l(),m("matFooterRowDef",ut(12,_e))("matFooterRowDefSticky",!0),l(2),m("disabled",!n.isStartReady),l(3),E(" ",t("buttons.start_game")," ")}}var Yn=(()=>{class e extends le{route;dialog=d(te);applicationGames$;applicationPlayersList$;newPlayer=tt(new Jt);originalPlayersList=[];originalGameList=[];originalExpansionList=[];availableWonderList=[];eTitleBarAction=ae;eGameType=u;gameType=u.GAME_BASE;matchPlayerDataSource=new I;matchPlayersList=[];displayedColumns=["table-player","table-wonder","table-action"];isStartReady=!1;orderBy="asc";constructor(t){super(),this.route=t,this.applicationGames$=this._store.select(P.getApplicationGames),this.applicationPlayersList$=this._store.select(P.getApplicationPlayers)}ngOnInit(){this.gameType=this.route.snapshot.data.gameType,this._loadPlayerList(),this._loadGameInfo()}onChangeExpansionValue(t){this.originalExpansionList[t].value=!this.originalExpansionList[t].value,this._loadWondersList(),this.originalExpansionList[t].value||this._refreshDataSourceList()}_loadPlayerList(){this.originalPlayersList=[],this.applicationPlayersList$.pipe(A(this.destroy$)).subscribe(t=>{t.filter(n=>n.name).forEach(n=>{this.originalPlayersList.map(a=>a.name).includes(n.name)||this.originalPlayersList.push({id:n.id,name:n.name})})}),this.originalPlayersList=w.sortByProperties(this.originalPlayersList,["name"])}_loadGameInfo(){this.applicationGames$.pipe(A(this.destroy$)).subscribe(t=>{this.originalGameList=t.filter(n=>n.gameType===this.gameType),t.filter(n=>n.gameType===this.gameType&&n.name!="").forEach(n=>{n.expansions.forEach(a=>{this.originalExpansionList.push({name:a.name,icon:a.icon,label:a.label,value:!1,wondersList:a.wonders})})}),this._loadWondersList(),this.originalExpansionList=w.sortByProperties(this.originalExpansionList,["name"])})}_loadWondersList(t=!1){this.availableWonderList=[],this.originalGameList.length!==0&&(this.originalGameList[0].wonders.forEach(n=>{this.availableWonderList.push({name:n.name})}),this.originalExpansionList.forEach(n=>{n.value&&n.wondersList?.forEach(a=>{this.availableWonderList.push({name:a.name,icon:n.icon})})}),t||this.matchPlayersList.forEach(n=>{n.wonder?.forEach(a=>{var r=this.availableWonderList.findIndex(h=>h.name===a.name);r>-1&&this.availableWonderList.splice(r,1)})}),this.availableWonderList=w.sortByProperties(this.availableWonderList,["name"]))}_refreshDataSourceList(){this.matchPlayersList.length>0&&this.matchPlayersList.forEach(t=>{t.wonder?.forEach(n=>{this.originalExpansionList.forEach(a=>{a.wondersList?.forEach(r=>{r.name===n.name&&!a.value&&t.wonder?.splice(t.wonder?.indexOf(n),1)})})})}),this.matchPlayerDataSource.setData(this.matchPlayersList)}_validatedConfiguration(){let t=this.matchPlayersList.every(n=>ce(this.gameType,n.wonder?.length));this.isStartReady=se(this.gameType,this.matchPlayersList.length,t)}addPlayer(t){let n=new ee({name:t.name});if(t.id||this._store.dispatch(new Bt.AddPlayerApplicationState(n)),this.matchPlayersList.filter(r=>r.name.toLowerCase()===t.name.toLowerCase()).length>0){this._snackbarService.openDangerSnackBar(ne);return}this.matchPlayersList=[...this.matchPlayersList,t],this.matchPlayerDataSource.setData(this.matchPlayersList),this._loadWondersList(),this._validatedConfiguration()}removePlayer(t){this.matchPlayersList.splice(t,1),this.matchPlayerDataSource.setData(this.matchPlayersList),this._loadWondersList(),this._validatedConfiguration()}generateWonders(){let t=Object.values(At),n=Math.floor(Math.random()*t.length);var a=this.matchPlayersList.some(h=>!h.wonder?.length);a||this._loadWondersList(!0);let r=[...this.availableWonderList];this.matchPlayersList.filter(h=>a&&h.wonder?.length===0||!a&&h.wonder?.length!=0).forEach(h=>{if(r.length>0){let D=this.gameType===u.GAME_DUEL?4:1,U=[];for(let H=0;H<D;H++){let j=Math.floor(Math.random()*r.length);U.push({name:r[j].name,icon:"",side:this.gameType===u.GAME_BASE?t[n]:void 0}),r.splice(j,1)}h.wonder=U}}),this._loadWondersList(),this._validatedConfiguration()}orderByPlayerName(){this.orderBy=this.orderBy==="name:asc"?"name:desc":"name:asc",this.matchPlayersList=w.sortByProperties(this.matchPlayersList,[this.orderBy]),this.matchPlayerDataSource.setData(this.matchPlayersList)}createAndStartMatch(){this._store.dispatch(new L.CreateAndStartMatch(this.gameType,this.originalExpansionList.filter(t=>t.value===!0).map(t=>t.name),this.matchPlayersList))}dialogData(){let t=new Kt;return t.data={wonders:this.availableWonderList,multipleWonders:this.gameType===u.GAME_DUEL,hasWonderSide:this.gameType===u.GAME_BASE},t}static \u0275fac=function(n){return new(n||e)(nt(pt))};static \u0275cmp=O({type:e,selectors:[["app-configuration"]],features:[ot],decls:1,vars:0,consts:[[4,"transloco"],[1,"score-sheet-configuration-container"],[1,"expansion-title"],[3,"title","action"],[1,"expasions-list"],[1,"button-toggle",3,"value"],[1,"player-type"],[3,"returnAddPlayerDialogEmitted","title","action","matDialogConfig"],[1,"players-list"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","table-player"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","table-wonder"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","table-action"],["matColumnDef","disclaimer"],["mat-footer-cell","","colspan","3",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[1,"start-button"],["mat-fab","","extended","",3,"click","disabled"],[1,"button-toggle",3,"change","value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"click"],["mat-footer-cell","","colspan","3"],[1,"table-footer"],["mat-fab","",1,"table_buttons",3,"click"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(n,a){n&1&&p(0,De,30,13,"ng-container",0)},dependencies:[Tt,Ot,Et,re,$,Xt,Rt,Vt,Ht,Nt,Ft,Qt,Wt,jt,zt,Ut,$t,Yt,Zt,qt,yt,ft,kt,Mt,St,wt,Pt,oe],styles:['@font-face{font-family:gameFont;src:url("./media/PossumSaltareNF-CECI3YYZ.ttf")}.score-sheet-configuration-container[_ngcontent-%COMP%]{padding:.5rem;background-color:#f7f7f7}.score-sheet-configuration-container[_ngcontent-%COMP%]   .expasions-list[_ngcontent-%COMP%]{margin:.5rem 0rem;display:flex;flex-direction:row;justify-content:left;align-items:left;height:100%;flex-wrap:wrap;gap:1rem .65rem;padding:.5rem 0 0}.score-sheet-configuration-container[_ngcontent-%COMP%]   .expasions-list[_ngcontent-%COMP%]   .button-toggle[_ngcontent-%COMP%]{width:48%;background-color:#b2c8df;font-family:gameFont;border-radius:0%;color:#000;border-color:#152536;letter-spacing:.2rem}.score-sheet-configuration-container[_ngcontent-%COMP%]   .expasions-list[_ngcontent-%COMP%]   .mat-button-toggle-checked[_ngcontent-%COMP%]{color:#c9a14b;background-color:#152536}.score-sheet-configuration-container[_ngcontent-%COMP%]   .player-type[_ngcontent-%COMP%]{padding:.5rem 0 0;padding-bottom:0%}.score-sheet-configuration-container[_ngcontent-%COMP%]   .player-type[_ngcontent-%COMP%]   .mat-toolbar-single-row[_ngcontent-%COMP%]{font-size:medium;padding:0rem;height:2rem;font-family:gameFont}.score-sheet-configuration-container[_ngcontent-%COMP%]   .player-type[_ngcontent-%COMP%]   .example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.score-sheet-configuration-container[_ngcontent-%COMP%]   .player-type[_ngcontent-%COMP%]   .players-action[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;gap:1rem}.score-sheet-configuration-container[_ngcontent-%COMP%]   .player-type[_ngcontent-%COMP%]   .players-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:gameFont;height:2.5rem;border-radius:0;font-size:small;width:45%;padding:0;margin:0;box-shadow:none;background-color:transparent}.score-sheet-configuration-container[_ngcontent-%COMP%]   .player-type[_ngcontent-%COMP%]   .players-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{scale:.8}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]{padding:0rem 0 0}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]     .mat-mdc-header-row{height:1rem!important;background-color:#152536!important;color:#c9a14b!important}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]     .mat-mdc-footer-row{height:2.5rem!important;color:#c9a14b!important}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-family:gameFont;font-size:small;height:1rem}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:small}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-table-player[_ngcontent-%COMP%]{width:150px}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-table-wonder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.1rem}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-table-wonder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{scale:.6}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-table-action[_ngcontent-%COMP%]{width:30px;text-align:right}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-table-action[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{color:red}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   .mat-mdc-table-sticky[_ngcontent-%COMP%]{border-top-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, .12)));border-top-width:var(--mat-table-row-item-outline-width, 1px);border-top-style:solid}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   .table-footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:wrap;gap:.3rem}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   .table-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:nowrap;background-color:transparent;scale:.8;border:none;box-shadow:none;color:#000;height:2rem;width:10rem;border-left:1px solid #000000;border-right:1px solid #000000}.score-sheet-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   .table-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin:0;padding:0}.score-sheet-configuration-container[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;text-align:center}.score-sheet-configuration-container[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#152536;color:#c9a14b;border:none;padding:15px 0;font-size:18px;cursor:pointer;border-radius:20px 20px 0 0}.score-sheet-configuration-container[_ngcontent-%COMP%]   .start-button[_ngcontent-%COMP%]   .mdc-fab.mat-mdc-button-disabled[_ngcontent-%COMP%]{background-color:#bdbdbd!important;color:#888a90!important}'],changeDetection:0})}return e})();export{Yn as ConfigurationComponent};
