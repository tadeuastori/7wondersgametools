import{a as X,c as G,d as J}from"./chunk-PPMVQBJH.js";import{o as Z}from"./chunk-EPCD3WCK.js";import{b as j}from"./chunk-MVCCDNO7.js";import{a as et,b as nt,c as it,d as at,e as ot,f as rt,g as ct,h as lt}from"./chunk-LCFUJCMS.js";import{a as tt}from"./chunk-SOS2MTMO.js";import{d as q,e as H,f as K,m as Q,n as W}from"./chunk-IS34MZJW.js";import{G as v,J as U,t as z,v as N}from"./chunk-EENQSQLG.js";import{$c as F,Ab as g,Bb as l,La as o,Lb as p,Mb as x,Nb as b,X as D,Xa as u,_a as I,ab as s,ad as P,ga as L,ib as O,m as S,md as V,na as _,nb as m,oa as f,ob as T,qb as w,qd as M,rb as A,sb as r,tb as c,u as E,ub as R,ud as Y,vb as B,vd as $,wb as k,xa as y,yb as C}from"./chunk-QLFZEIEK.js";var h=class extends N{_dataStream=new S;count=this._dataStream.pipe(E(i=>i.length));constructor(i=[]){super(),this.setData(i)}connect(){return this._dataStream}disconnect(){}setData(i){this._dataStream.next(i)}};function pt(e,i){if(e&1&&(r(0,"mat-card-title"),p(1),c()),e&2){let t=l(2);o(),x(t.title)}}function _t(e,i){if(e&1&&(r(0,"mat-card-subtitle"),p(1),c()),e&2){let t=l(2);o(),x(t.subtitle)}}function ft(e,i){if(e&1&&(r(0,"mat-card-header"),s(1,pt,2,1,"mat-card-title")(2,_t,2,1,"mat-card-subtitle"),c()),e&2){let t=l();o(),m(t.title?1:-1),o(),m(t.subtitle?2:-1)}}function Ct(e,i){if(e&1&&(r(0,"div",1),p(1),c()),e&2){let t=l();o(),b(" ",t.textLeft," ")}}function gt(e,i){if(e&1){let t=C();r(0,"button",4),g("click",function(){_(t);let a=l(2);return f(a.deleteItem(a.index))}),r(1,"mat-icon"),p(2,"delete"),c()()}}function ut(e,i){if(e&1&&p(0),e&2){let t=l(2);b(" ",t.textRight," ")}}function xt(e,i){if(e&1&&(r(0,"div",2),s(1,gt,3,0,"button",3)(2,ut,1,1),c()),e&2){let t=l();o(),m(t.hasDelete?1:2)}}function Pt(e,i){e&1&&R(0,"mat-card-actions")}function Mt(e,i){if(e&1&&(r(0,"mat-card-footer"),p(1),c()),e&2){let t=l();o(),x(t.footer)}}var mt=(()=>{class e{title="";subtitle="";footer="";buttons="";textLeft="";textRight="Last played 2025-10-13";hasDelete=!1;index="";deleteItemEmitted=new y;openItemEmitted=new y;deleteItem(t){this.deleteItemEmitted.emit(t)}openItem(t){this.openItemEmitted.emit(t)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["app-card"]],inputs:{title:"title",subtitle:"subtitle",footer:"footer",buttons:"buttons",textLeft:"textLeft",textRight:"textRight",hasDelete:"hasDelete",index:"index"},outputs:{deleteItemEmitted:"deleteItemEmitted",openItemEmitted:"openItemEmitted"},decls:7,vars:5,consts:[["appearance","raised"],[1,"left"],[1,"right"],["mat-icon-button","",1,"example-icon"],["mat-icon-button","",1,"example-icon",3,"click"]],template:function(n,a){n&1&&(r(0,"mat-card",0),s(1,ft,3,2,"mat-card-header"),r(2,"mat-card-content"),s(3,Ct,2,1,"div",1)(4,xt,3,1,"div",2),c(),s(5,Pt,1,0,"mat-card-actions")(6,Mt,2,1,"mat-card-footer"),c()),n&2&&(o(),m(a.title||a.subtitle?1:-1),o(2),m(a.textLeft?3:-1),o(),m(a.textRight?4:-1),o(),m(a.buttons?5:-1),o(),m(a.footer?6:-1))},dependencies:[lt,et,ot,it,ct,rt,at,nt,M,V,P,F],styles:['@font-face{font-family:gameFont;src:url("./media/PossumSaltareNF-CECI3YYZ.ttf")}.mat-mdc-card[_ngcontent-%COMP%]{padding:0;border-radius:.2rem;background-color:#fff}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{padding:.5rem}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:.5rem;display:flex;flex-direction:row;align-content:stretch}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-grow:1;padding:.1rem .5rem;align-self:flex-end}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{text-align:left;width:50%}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right;font-style:italic;font-size:small;align-items:flex-end;width:50%}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:red;align-self:flex-end;margin:0;padding:0;height:20px;width:20px;vertical-align:bottom}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-mdc-button-touch-target[_ngcontent-%COMP%]{height:0rem;padding:0rem;margin:0rem}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{scale:.8}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-actions[_ngcontent-%COMP%], .mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-footer[_ngcontent-%COMP%]{padding:.5rem}']})}return e})();function ht(e,i){if(e&1){let t=C();r(0,"div",5)(1,"app-card",6),g("deleteItemEmitted",function(){let a=_(t).$index,d=l(3);return f(d.removePlayer(a))}),c()()}if(e&2){let t=i.$implicit;o(),O("textLeft",t.name)("hasDelete",!0)}}function yt(e,i){if(e&1&&w(0,ht,2,2,"div",5,T),e&2){let t=l(2);A(t.playersList)}}function Ot(e,i){if(e&1){let t=C();B(0),r(1,"div",1)(2,"div",2)(3,"app-title-bar",3),g("returnAddPlayerDialogEmitted",function(a){_(t);let d=l();return f(d.addPlayer(a))}),c()(),r(4,"div",4),s(5,yt,2,0),c()(),k()}if(e&2){let t=l();o(3),O("action",t.eTitleBarAction.ADD_PLAYER),o(2),m(t.playersList.length>0?5:-1)}}var re=(()=>{class e extends tt{dialog=L(q);applicationPlayersList$;displayedColumns=["table-player","table-action"];playerDataSource=new h;playersList=[];eTitleBarAction=K;constructor(){super(),this.applicationPlayersList$=this._store.select(U.getApplicationPlayers)}ngOnInit(){this._loadPlayerList(),this._refreshDataSourceList()}_refreshDataSourceList(){this.playerDataSource.setData(this.playersList)}_loadPlayerList(){this.applicationPlayersList$.pipe(D(this.destroy$)).subscribe(t=>{t.filter(n=>n.name).forEach(n=>{this.playersList.map(a=>a.name).includes(n.name)||this.playersList.push({id:n.id,name:n.name})})}),this.playersList=H.sortByProperties(this.playersList,["name"])}addPlayer(t){let n=new X({name:t.name});if(t.id||(this._store.dispatch(new v.AddPlayerApplicationState(n)),this._snackbarService.openSuccessSnackBar(J)),this.playersList.filter(d=>d.name.toLowerCase()===t.name.toLowerCase()).length>0){this._snackbarService.openDangerSnackBar(G);return}this.playersList=[...this.playersList,t],this.playerDataSource.setData(this.playersList.sort((d,dt)=>d.name.localeCompare(dt.name)))}removePlayer(t){var n=this.playersList[t];n.id&&(this._store.dispatch(new v.DeletePlayerApplicationState(n.id)),this.playersList.splice(t,1),this.playerDataSource.setData(this.playersList))}openDialog(t){t.currentTarget.blur(),this.dialog.open(Q).afterClosed().subscribe(d=>{d!==void 0&&this.addPlayer(d)})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["app-players"]],features:[I],decls:1,vars:0,consts:[[4,"transloco"],[1,"settings-configuration-container"],[1,"player-title"],[3,"returnAddPlayerDialogEmitted","action"],[1,"players-list"],[1,"item"],[3,"deleteItemEmitted","textLeft","hasDelete"]],template:function(n,a){n&1&&s(0,Ot,6,2,"ng-container",0)},dependencies:[j,z,Z,P,$,Y,M,mt,W],styles:['@font-face{font-family:gameFont;src:url("./media/PossumSaltareNF-CECI3YYZ.ttf")}.settings-configuration-container[_ngcontent-%COMP%]{padding:.5rem;background-color:#f7f7f7}.settings-configuration-container[_ngcontent-%COMP%]   .player-title[_ngcontent-%COMP%]{padding-bottom:0%}.settings-configuration-container[_ngcontent-%COMP%]   .player-title[_ngcontent-%COMP%]   .mat-toolbar-single-row[_ngcontent-%COMP%]{font-size:large;padding:0rem;height:2rem;font-family:gameFont}.settings-configuration-container[_ngcontent-%COMP%]   .player-title[_ngcontent-%COMP%]   .title-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.settings-configuration-container[_ngcontent-%COMP%]   .players-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-top:.5rem}']})}return e})();export{re as PlayersComponent};
