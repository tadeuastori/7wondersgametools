<ng-container *transloco="let t">
<div class="score-sheet-configuration-container">
    <div class="expansion-title">
      <app-title-bar
        [title]="t('pages.score_sheet.configuration.expansions')"
        [action]="eTitleBarAction.NONE"
      ></app-title-bar>
    </div>
    <div class="expasions-list">
      @for (item of originalExpansionList; track $index; let i = $index) {
      <mat-button-toggle
        class="button-toggle"
        [value]="item.value"
        (change)="onChangeExpansionValue(i)"
      >
        @if (item.icon) {
        <mat-icon>{{ item.icon }}</mat-icon>
        }
        {{ t(item.label) }}
      </mat-button-toggle>
      }
    </div>
    <div class="player-type">
      <app-title-bar
        [title]="t('pages.score_sheet.configuration.players')"
        [action]="((gameType === eGameType.GAME_DUEL && matchPlayersList.length < 2) || (gameType != eGameType.GAME_DUEL && matchPlayersList.length < 7)) ? eTitleBarAction.ADD_PLAYER : eTitleBarAction.NONE"
        [matDialogConfig]="dialogData()"
        (returnAddPlayerDialogEmitted)="addPlayer($event)"
      ></app-title-bar>
    </div>
    <div class="players-list">
      <table
        mat-table
        [dataSource]="matchPlayerDataSource"
        class="mat-elevation-z8"
      >
        <ng-container matColumnDef="table-player">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>{{t("table_forms.player")}}</th>
          <td mat-cell *matCellDef="let element">
            <p>{{ element.name }}</p>
          </td>
        </ng-container>

        <ng-container matColumnDef="table-wonder">
          <th mat-header-cell *matHeaderCellDef>{{t("table_forms.wonder")}}</th>
          <td mat-cell *matCellDef="let element">
            @for (item of element.wonder; track $index) {
            <p>
              {{ item.name }}
              @if(item.side) {
              <mat-icon>{{ item.side }}</mat-icon>
              }            
            </p>
            }
          </td>
        </ng-container>

        <ng-container matColumnDef="table-action">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element; let i = index">
            <button
              mat-icon-button
              class="example-icon"
              aria-label="Example icon-button with menu icon"
              (click)="removePlayer(i)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>
        
        <ng-container matColumnDef="disclaimer">
            <td mat-footer-cell *matFooterCellDef colspan="3">          
              @if (matchPlayersList.length > 0) {
                <div class="table-footer">
                    <button mat-fab class="table_buttons" (click)="orderByPlayerName()">
                      <mat-icon>sort_by_alpha</mat-icon>
                      <mat-icon>person</mat-icon>
                    </button>                    
                    <button mat-fab class="table_buttons" (click)="generateWonders()">
                      <mat-icon>shuffle</mat-icon>
                      <mat-icon>temple_hindu</mat-icon>
                    </button>  
                </div>
              }
            </td>        
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        <tr mat-footer-row *matFooterRowDef="['disclaimer']; sticky: true"></tr>
      </table>
    </div>
    <div class="start-button">
      <button
        mat-fab
        extended
        (click)="createAndStartMatch()"
        [disabled]="!isStartReady"
      >
        <mat-icon>casino</mat-icon>
        {{t("buttons.start_game")}}
      </button>
    </div>
  </div>
</ng-container>

